---
layout: post
title:  "[BOJ 18117] 분수"
author: "1bin"
comments: true
tags: Tale
---

백준 문제 링크 : https://www.acmicpc.net/problem/18117

모듈러 연산에 대한 기본적인 지식이 필요한 정수론 문제이다.  
분수 a / b의 소수점 아래 숫자를 구하는 간단한 문제지만 a, b, i의 제한이 10e18로 괴랄하다.. 따라서 단순히 계산을 반복하기보다는 정수론이나 분할정복의 아이디어를 가져올 필요가 있다.  
  
감이 잘 안잡힌다면 직접 나눗셈을 해보자.  
f(y)을 소수점 아래 y번째 자리 수라고 할 때  
f(1) = (a % b * 10) / b  
f(2) = (a % b * 10 % b * 10) / b  
f(3) = (a % b * 10 % b * 10 % b * 10) % b  
뭔가 규칙성이 있는 것 같다.(없으면 문제를 못푼다..) f(y)은 f(y - 1)을 얻고 난 나머지에 10을 곱하고 b로 나눈 값의 몫이다. 즉 (* 10 % b)를 반복하면 f(y)을 얻을 수 있고, 이를 일반항으로 나타내면 아래와 같다.  
f(y) = (a % b) * (10 ^(y - 1) (mod b)) * 10 / b (모듈러의 곱셈은 교환, 결합법칙이 성립한다)  
  
근데 여기서 y가 10e18까지 들어올 수 있다. 따라서 오버플로우를 피하기 위해 행렬제곱의 분할정복 아이디어를 가져와 계산한다.  
또한 분할정복을 할 때, x * x에서 x의 제한이 10e18이기 때문에 오버플로우가 발생할 수 있기 때문에, x * x = (x + x + x + … + x), 즉, x * x는 x 를 x번 더한 것 과 같다는 점을 이용해야한다.  

  
<script src="https://gist.github.com/1bin01/d52015402d3df5b9f5cbffd89eb978c3.js"></script>
